<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    <body>
        <h2>THÔNG BÁO DÀNH CHO KHÁCH HÀNG</h2> <br/>
        Kính gửi ông/bà {{ customerName }}      Quốc tịch: Việt Nam

        {% macro format_number(my_num) -%}
            {{ "{0:,.2f}".format(my_num)|replace(".", "#")|replace(",", ".")|replace("#", ",") }}
        {%- endmacro %}

        <table class="table table-bordered table-without-space">
            <tr>
                <td class="td-boder">STT</td>
                <td class="td-boder">Tên hạng mục</td>
                <td class="td-boder">Số tiền</td>
                <td class="td-boder">Ghi chú</td>
            </tr>
            
            {% for item in paymentRequest %}
            <tr>
                <td class="td-boder"> {{ loop.index }} </td>
                <td class="td-boder"> {{ item.serviceName }} </td>
                <td class="td-boder">{{ format_number(item.cash) }}</td>
                <td class="td-boder">{{ item['note'] }}</td>
            </tr>
            {% endfor %}
            {% set total = paymentRequest|sum(attribute='cash') %}
            <tr>
                <td class="td-boder"></td>
                <td class="td-boder">Tổng cộng</td>
                <td class="td-boder">
                    {{ format_number(total) }}
                </td>
                <td class="td-boder"></td>
            </tr>
        </table> <br/>

    </body>
</html>